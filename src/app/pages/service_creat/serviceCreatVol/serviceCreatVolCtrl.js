/** * Created by sorcerer on 2017/11/3. */(function () {    'use strict';    angular.module('BlurAdmin.pages.servicecreat')        .controller('serviceCreatVolCtrl', serviceCreatVolCtrl);    /** @ngInject */    function serviceCreatVolCtrl($scope,persistent,Cookie,configmaps,secretskey) {        $scope.addvol = function (vols,key,namekey) {            vols.push({})            vols[vols.length-1][key]={};            vols[vols.length-1].mountPath='';            vols[vols.length-1][key][namekey]='名称';        }        $scope.volchecked = function (persistentitem,key,keyname,name) {            persistentitem[key][keyname] = name;        }        $scope.persistentVolumeClaim = [];        $scope.configMap = [];        $scope.secretsitems=[];        var loadsecretskey= function () {            secretskey.get({                namespace: Cookie.get('namespace')            }, function (res) {                if (res.items) {                    $scope.secretsitems = res.items;                }            })        }        loadsecretskey()        var loadpersistent= function () {            persistent.get({                namespace: Cookie.get('namespace')            }, function (res) {                //console.log(res.items);                if (res.items) {                    angular.forEach(res.items, function (item, i) {                        if (item.status.phase == "Bound") {                            $scope.persistentVolumeClaim.push(item)                        }                    })                }            })        }        $scope.delvol = function (vol, i) {            //console.log('containers', containers);            vol.splice(i, 1)        }        loadpersistent()        var loadconfigmaps= function () {            configmaps.get({                namespace:Cookie.get('namespace')            }, function (res) {                if (res.items) {                    $scope.configMap = res.items;                }            })        }        loadconfigmaps()    }})();